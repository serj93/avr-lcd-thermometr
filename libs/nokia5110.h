#define F_CPU 4000000UL


#define LCD_RST_set  PORTB |=  _BV(PB4)    //external reset input
#define LCD_RST_clr  PORTB &=~ _BV(PB4)

#define LCD_DC_set   PORTB |=  _BV(PB1)    //data/commande
#define LCD_DC_clr   PORTB &=~ _BV(PB1)

#define SDIN_set     PORTB |=  _BV(PB3)    //serial data input
#define SDIN_clr     PORTB &=~ _BV(PB3)

#define SCLK_set     PORTB |=  _BV(PB5)    //serial clock input
#define SCLK_clr     PORTB &= ~_BV(PB5)

#define SCE_set      PORTB |=  _BV(PB2)    //set enable
#define SCE_clr      PORTB &= ~_BV(PB2)

void LCD_write_byte(unsigned char dat, unsigned char command);
void LCD_init();
void LCD_clear();
void LCD_set_XY(unsigned char X, unsigned char Y);
void LCD_print_line(unsigned char X,unsigned char Y,unsigned char number);
void LCD_print_big_num(unsigned char X,unsigned char Y,unsigned char number);

// 12 x 16 font
// 1 pixel space at left and bottom
// index = ASCII - 32
static const unsigned char font12x16[][12] =
{
	{ 0xFC, 0x7A, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x7A, 0xFC, 0x00, 0x00 },	// 0 (0)
	{ 0x7E, 0xBC, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xBC, 0x7E, 0x00, 0x00 },
	
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x78, 0xFC, 0x00, 0x00 },	// 1 (2)
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x7E, 0x00, 0x00 },
	
	{ 0x00, 0x02, 0x86, 0x86, 0x86, 0x86, 0x86, 0x86, 0x7A, 0xFC, 0x00, 0x00 }, // 2 (4)
	{ 0x7E, 0xBD, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0x81, 0x00, 0x00, 0x00 },
	
	{ 0x00, 0x02, 0x86, 0x86, 0x86, 0x86, 0x86, 0x86, 0x7A, 0xFC, 0x00, 0x00 },	// 3 (6)
	{ 0x00, 0x81, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0xBD, 0x7E, 0x00, 0x00 },

	{ 0xFC, 0x78, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x78, 0xFC, 0x00, 0x00 },	// 4 (8)
	{ 0x00, 0x01, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x3D, 0x7E, 0x00, 0x00 },

	{ 0xFC, 0x7A, 0x86, 0x86, 0x86, 0x86, 0x86, 0x86, 0x02, 0x00, 0x00, 0x00 },	// 5 (10)
	{ 0x00, 0x81, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0xBD, 0x7E, 0x00, 0x00 },

	{ 0xFC, 0x7A, 0x86, 0x86, 0x86, 0x86, 0x86, 0x86, 0x02, 0x00, 0x00, 0x00 },	// 6 (12)
	{ 0x7E, 0xBD, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0xBD, 0x7E, 0x00, 0x00 },
	
	{ 0x00, 0x02, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x7A, 0xFC, 0x00, 0x00 },	// 7 (14)
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x7E, 0x00, 0x00 },

	{ 0xFC, 0x7A, 0x86, 0x86, 0x86, 0x86, 0x86, 0x86, 0x7A, 0xFC, 0x00, 0x00 },	// 8 (16)
	{ 0x7E, 0xBD, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0xBD, 0x7E, 0x00, 0x00 },

	{ 0xFC, 0x7A, 0x86, 0x86, 0x86, 0x86, 0x86, 0x86, 0x7A, 0xFC, 0x00, 0x00 },	// 9 (18)
	{ 0x00, 0x81, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0xBD, 0x7E, 0x00, 0x00 },

	{ 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00 },	// - (20)
	{ 0x00, 0x01, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x01, 0x00, 0x00, 0x00 },

	{ 0x0C, 0x12, 0x12, 0x0C, 0x00, 0x00, 0xFC, 0x7A, 0x06, 0x06, 0x06, 0x02 },	// <0>C (22)
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7E, 0xBC, 0xC0, 0xC0, 0xC0, 0x80 },

	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },	// . (24)
	{ 0x00, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },

	{ 0x02, 0x0E, 0x72, 0x80, 0x00, 0x00, 0x00, 0x00, 0x80, 0x72, 0x0E, 0x02 },	// V (26)
	{ 0x00, 0x00, 0x00, 0x03, 0x1C, 0xE0, 0xE0, 0x1C, 0x03, 0x00, 0x00, 0x00 },
};

static const unsigned char strLines[][18] =
{
	// OUT
	{0x00, 0x3E, 0x41, 0x41, 0x41, 0x3E, 0x00, 0x3F, 0x40, 0x40, 0x40, 0x3F, 0x00, 0x01, 0x01, 0x7F, 0x01, 0x01},
	// IN
	{0x00, 0x00, 0x41, 0x7F, 0x41, 0x00, 0x00, 0x7F, 0x04, 0x08, 0x10, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	// ERR
	{0x00, 0x7F, 0x49, 0x49, 0x49, 0x41, 0x00, 0x7F, 0x09, 0x19, 0x29, 0x46, 0x00, 0x7F, 0x09, 0x19, 0x29, 0x46},
	// BAT
	{0x00, 0x7F, 0x49, 0x49, 0x49, 0x36, 0x00, 0x7C, 0x12, 0x11, 0x12, 0x7C, 0x00, 0x01, 0x01, 0x7F, 0x01, 0x01},
};

